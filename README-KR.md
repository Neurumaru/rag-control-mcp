# MCP-RAG-Control ν”„λ΅μ νΈ μƒμ„Έ μ„¤λ…

## ν”„λ΅μ νΈ κ°μ”
mcp-rag-controlμ€ μ—μ΄μ „νΈ κΈ°λ° RAG(Retrieval-Augmented Generation) μ‹μ¤ν…μ„ μ„ν• λ§µ κΈ°λ° μ μ–΄ μ•„ν‚¤ν…μ²μ…λ‹λ‹¤. μ΄ μ‹μ¤ν…μ€ λ³µμ΅ν• μ •λ³΄ κ²€μƒ‰κ³Ό μƒμ„± ν”„λ΅μ„Έμ¤λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•κ³  μ μ–΄ν•κΈ° μ„ν•΄ μ„¤κ³„λμ—μµλ‹λ‹¤.

## μ•„ν‚¤ν…μ² κµ¬μ„±

MCP-RAG-Control μ•„ν‚¤ν…μ²λ” λ‹¤μκ³Ό κ°™μ€ μ£Όμ” μ»΄ν¬λ„νΈλ΅ κµ¬μ„±λ©λ‹λ‹¤:

### API μΈν„°νμ΄μ¤
- μ‚¬μ©μ λλ” μ™Έλ¶€ μ‹μ¤ν…κ³Όμ μƒνΈμ‘μ©μ„ μ„ν• RESTful API μ κ³µ
- λ¨λ“ λ“±λ΅, νμ΄ν”„λΌμΈ κµ¬μ„±, μΏΌλ¦¬ μ‹¤ν–‰ μ—”λ“ν¬μΈνΈ μ κ³µ

### μ»¨νΈλ΅¤λ¬
- μ‹μ¤ν…μ μ¤‘μ•™ μ μ–΄ μ¥μΉλ΅ λ¨λ“  μ”μ²­κ³Ό νλ¦„μ„ μ΅°μ •
- LangGraph κΈ°λ°μΌλ΅ λ³µμ΅ν• μ›ν¬ν”λ΅μ° κ΄€λ¦¬ λ° μ‹¤ν–‰
- λ¨λ“ κ°„ ν†µμ‹  λ° λ°μ΄ν„° νλ¦„ μ μ–΄

### λ¨λ“ λ“±λ΅ μ €μ¥μ†
- λ°μ΄ν„° μ†μ¤, λ²΅ν„° μ €μ¥μ†, μ„λ² λ”© λ¨λΈ λ“± λ‹¤μ–‘ν• λ¨λ“ κ΄€λ¦¬
- MCP νΈν™ λ¨λ“μ— λ€ν• λ©”νƒ€λ°μ΄ν„° λ° μ„¤μ • μ •λ³΄ μ €μ¥

### νμ΄ν”„λΌμΈ λ“±λ΅ μ €μ¥μ†
- μ‚¬μ©μ μ •μ RAG νμ΄ν”„λΌμΈ κµ¬μ„± μ •λ³΄ μ €μ¥
- λ¨λ“ μ—°κ²° λ°©μ‹, λ°μ΄ν„° νλ¦„, μ‹¤ν–‰ μμ„ μ •μ

### MCP μ–΄λ‘ν„°
- λ‹¤μ–‘ν• μ™Έλ¶€ μ‹μ¤ν…κ³Όμ ν‘μ¤€ν™”λ ν†µμ‹  μΈν„°νμ΄μ¤
- λ°μ΄ν„° μ†μ¤λ³„ λ§μ¶¤ν• MCP κµ¬ν„ μ§€μ›

## μ»΄ν¬λ„νΈ μƒνΈμ‘μ© νλ¦„

### λ¨λ“ λ“±λ΅

1.  **μ‚¬μ©μ μ”μ²­:** μ‚¬μ©μκ°€ APIλ¥Ό ν†µν•΄ λ¨λ“μ„ λ“±λ΅ν•λ©΄ (`/modules` μ—”λ“ν¬μΈνΈ νΈμ¶).
2.  **μ»¨νΈλ΅¤λ¬ μ²λ¦¬:** μ»¨νΈλ΅¤λ¬λ” μ”μ²­μ„ λ°›μ•„ λ¨λ“ λ“±λ΅ μ”μ²­μ„ μ²λ¦¬.
3.  **λ¨λ“ λ“±λ΅:** λ¨λ“ λ“±λ΅ μ”μ²­μ€ λ¨λ“ λ“±λ΅ μ €μ¥μ†μ— μ €μ¥λκ³ , λ“±λ΅λ λ¨λ“ λ©λ΅μ„ λ°ν™.

### νμ΄ν”„λΌμΈ λ“±λ΅

1.  **μ‚¬μ©μ μ”μ²­:** μ‚¬μ©μκ°€ APIλ¥Ό ν†µν•΄ νμ΄ν”„λΌμΈμ„ λ“±λ΅ν•λ©΄ (`/pipelines` μ—”λ“ν¬μΈνΈ νΈμ¶).
2.  **μ»¨νΈλ΅¤λ¬ μ²λ¦¬:** μ»¨νΈλ΅¤λ¬λ” μ”μ²­μ„ λ°›μ•„ νμ΄ν”„λΌμΈ λ“±λ΅ μ”μ²­μ„ μ²λ¦¬.
3.  **νμ΄ν”„λΌμΈ λ“±λ΅:** νμ΄ν”„λΌμΈ λ“±λ΅ μ”μ²­μ€ νμ΄ν”„λΌμΈ λ“±λ΅ μ €μ¥μ†μ— μ €μ¥λκ³ , λ“±λ΅λ νμ΄ν”„λΌμΈ λ©λ΅μ„ λ°ν™.

### νμ΄ν”„λΌμΈ μ‹¤ν–‰

1.  **μ‚¬μ©μ μ”μ²­:** μ‚¬μ©μκ°€ APIλ¥Ό ν†µν•΄ μ§λ¬Έμ„ μ μ¶ν•λ©΄ (`/execute` μ—”λ“ν¬μΈνΈ νΈμ¶).
2.  **μΏΌλ¦¬ μ²λ¦¬:** μ»¨νΈλ΅¤λ¬λ” μ‚¬μ©μ μ§λ¬Έμ„ λ¶„μ„ν•κ³  ν•΄λ‹Ή νμ΄ν”„λΌμΈμ„ μ‹λ³„.
3.  **νμ΄ν”„λΌμΈ μ‹¤ν–‰:** μ»¨νΈλ΅¤λ¬λ” νμ΄ν”„λΌμΈ μ‹¤ν–‰μ„ μ„ν•΄ ν•„μ”ν• λ¨λ“μ„ μ°Ύμ•„ μμ°¨μ μΌλ΅ μ‹¤ν–‰.
4.  **μ‘λ‹µ λ°ν™:** μƒμ„±λ μµμΆ… μ‘λ‹µμ€ API μΈν„°νμ΄μ¤λ¥Ό ν†µν•΄ μ‚¬μ©μμ—κ² μ „λ‹¬λ¨.

## μ£Όμ” κΈ°μ  μ©μ–΄ μ„¤λ…

### RAG (Retrieval-Augmented Generation)
- κΈ°μ΅΄ μ •λ³΄ κ²€μƒ‰κ³Ό μƒμ„±ν• μ–Έμ–΄ λ¨λΈμ„ κ²°ν•©ν• ν•μ΄λΈλ¦¬λ“ ν¨λ¬λ‹¤μ„
- μ™Έλ¶€ μ§€μ‹ λ² μ΄μ¤μ—μ„ κ΄€λ ¨ μ •λ³΄λ¥Ό κ²€μƒ‰ν•μ—¬ LLMμ μ‘λ‹µμ„ λ³΄κ°•ν•¨
- κµ¬μ‹ μ •λ³΄, ν™κ° ν„μƒ(hallucination), λ„λ©”μΈ νΉν™” μ§€μ‹ λ¶€μ΅± λ“±μ λ¬Έμ λ¥Ό ν•΄κ²°
- κ²€μƒ‰(Retrieval), μ¦κ°•(Augmentation), μƒμ„±(Generation) 3λ‹¨κ³„λ΅ μ‘λ™
- **μƒμ„Έ μμ‹ μ‹λ‚λ¦¬μ¤:**
    1.  **μ‚¬μ©μ μ§λ¬Έ:** μ‚¬μ©μκ°€ "μµμ‹  κΈμµ μƒν’ μ¶”μ²"μ΄λΌκ³  μ§λ¬Έν•©λ‹λ‹¤.
    2.  **μΏΌλ¦¬ μ²λ¦¬:** μ‹μ¤ν…μ€ μ§λ¬Έ ν…μ¤νΈλ¥Ό μ„λ² λ”© λ²΅ν„°(μ: 512μ°¨μ› μ‹¤μ λ²΅ν„°)λ΅ λ³€ν™ν•©λ‹λ‹¤.
    3.  **μ •λ³΄ κ²€μƒ‰ (Retrieval):**
        *   μ—°κ²°λ κΈμµ μƒν’ λ°μ΄ν„°λ² μ΄μ¤(μ: λ²΅ν„° κ²€μƒ‰ κΈ°λ¥μ΄ μλ” SQL λ°μ΄ν„°λ² μ΄μ¤)μ— μΏΌλ¦¬ν•©λ‹λ‹¤.
        *   **SQL μμ‹ (μ μ‚¬λ„ λ° μµμ‹ μ μ •λ ¬):**
            ```sql
            SELECT product_id, name, release_date, description
            FROM financial_products
            WHERE release_date > '2024-01-01' -- μμ‹: νΉμ • λ‚ μ§ μ΄ν›„ μƒν’
            ORDER BY vector_distance_cosine(embedding, query_embedding) DESC -- μΏΌλ¦¬ λ²΅ν„°μ™€ μ μ‚¬λ„ λ†’μ€ μ
            LIMIT 5;
            ```
        *   κ°€μ¥ κ΄€λ ¨μ„± λ†’κ³  μµμ‹ μΈ μƒν’ μ •λ³΄(μƒν’λ…, μ¶μ‹μΌ, μ„¤λ… λ“±) λ μ½”λ“ μ…‹μ„ κ°€μ Έμµλ‹λ‹¤.
    4.  **μ •λ³΄ μ¦κ°• (Augmentation):** κ²€μƒ‰λ μƒν’ μ •λ³΄λ“¤μ„ κµ¬μ΅°ν™”λ ν•μ‹(μ: JSON, Markdown)μΌλ΅ μ •λ¦¬ν•μ—¬ LLM ν”„λ΅¬ν”„νΈμ μ»¨ν…μ¤νΈλ΅ κµ¬μ„±ν•©λ‹λ‹¤.
        ```markdown
        [μ»¨ν…μ¤νΈ]
        1. μƒν’λ…: μ¤λ§νΈ μκΈ μ•ν, μ¶μ‹μΌ: 2024-03-15, νΉμ§•: AI κΈ°λ° μλ™ κΈλ¦¬ μ΅°μ •
        2. μƒν’λ…: κΈ€λ΅λ² μ±„κ¶ ν€λ“ ν”λ¬μ¤, μ¶μ‹μΌ: 2024-02-28, νΉμ§•: μ„ μ§„κµ­/μ‹ ν¥κµ­ μ±„κ¶ λ¶„μ‚° ν¬μ
        ...
        ```
    5.  **λ‹µλ³€ μƒμ„± (Generation):** κµ¬μ„±λ μ»¨ν…μ¤νΈμ™€ μ›λ³Έ μ§λ¬Έμ„ LLM(μ: GPT-4)μ— μ „λ‹¬ν•©λ‹λ‹¤. LLMμ€ μ κ³µλ μµμ‹  μ •λ³΄λ¥Ό λ°”νƒ•μΌλ΅ μ •ν™•ν•κ³  μƒμ„Έν• λ‹µλ³€μ„ μƒμ„±ν•©λ‹λ‹¤.

### MCP (Model Context Protocol)
- LLM μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό λ‹¤μ–‘ν• μ™Έλ¶€ λ°μ΄ν„° μ†μ¤λ¥Ό μ—°κ²°ν•λ” ν‘μ¤€ν™”λ ν”„λ΅ν† μ½
- RAG μ‹μ¤ν…μ—μ„ μƒμ„± λ¨λΈμ΄ μ‚¬μ©ν•λ” λ§¥λ½ μ •λ³΄λ¥Ό κ΄€λ¦¬ν•κ³  μ „λ‹¬
- λ™μ μ΄κ³  μ–‘λ°©ν–¥ λ§¥λ½ κµν™μ„ κ°€λ¥ν•κ² ν•¨
- λ‹¤μ–‘ν• λ°μ΄ν„° μ†μ¤ κ°„μ μƒνΈ μ΄μ©μ„± μ κ³µ
- **μƒμ„Έ μμ‹ μ‹λ‚λ¦¬μ¤:**
    1.  **λ³µν•© μ§λ¬Έ:** μ‚¬μ©μκ°€ νΉμ • κΈμµ μƒν’(μ: ID 123)μ— λ€ν•΄ "μ΄ μƒν’μ κ³Όκ±° μμµλ¥  μ¶”μ΄μ™€ κ΄€λ ¨λ μµκ·Ό λ‰΄μ¤ κΈ°μ‚¬λ” λ¬΄μ—‡μΈκ°€μ”?" λΌκ³  μ§λ¬Έν•©λ‹λ‹¤.
    2.  **λ³‘λ ¬ κ²€μƒ‰ μ”μ²­:** μ»¨νΈλ΅¤λ¬λ” μ΄ μ§λ¬Έμ„ λ¶„μ„ν•μ—¬ λ‘ κ°€μ§€ μ •λ³΄κ°€ ν•„μ”ν•λ‹¤κ³  νλ‹¨ν•©λ‹λ‹¤.
        *   μμµλ¥  λ°μ΄ν„°: μ‹κ³„μ—΄ λ°μ΄ν„°λ² μ΄μ¤(μ: InfluxDB)μ— μΏΌλ¦¬
        *   κ΄€λ ¨ λ‰΄μ¤: λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤(μ: FAISS)μ— μΏΌλ¦¬
    3.  **MCP κΈ°λ° ν†µμ‹ :**
        *   μ»¨νΈλ΅¤λ¬λ” MCP ν‘μ¤€ μ”μ²­ ν•μ‹μ„ μ‚¬μ©ν•μ—¬ κ° λ°μ΄ν„° μ†μ¤(InfluxDB MCP, FAISS MCP)μ— λΉ„λ™κΈ°μ μΌλ΅ μΏΌλ¦¬λ¥Ό λ³΄λƒ…λ‹λ‹¤.
        *   **ν‘μ¤€ μ”μ²­ ν•μ‹ (μμ‹):**
            ```json
            {
              "source_id": "influxdb_mcp_1",
              "operation": "query_timeseries",
              "params": {"product_id": 123, "metric": "yield", "time_range": "1y"},
              "request_id": "req-abc-1"
            }
            ```
            ```json
            {
              "source_id": "faiss_mcp_2",
              "operation": "vector_similarity_search",
              "params": {"query_embedding": [0.1, 0.5, ...], "product_id": 123, "top_k": 3},
              "request_id": "req-abc-2"
            }
            ```
    4.  **ν‘μ¤€ μ‘λ‹µ μμ‹ :** κ° MCPλ” μ²λ¦¬κ°€ μ™„λ£λλ©΄ ν‘μ¤€ μ‘λ‹µ ν•μ‹μΌλ΅ κ²°κ³Όλ¥Ό μ»¨νΈλ΅¤λ¬μ— λ°ν™ν•©λ‹λ‹¤.
        *   **ν‘μ¤€ μ‘λ‹µ ν•μ‹ (μμ‹):**
            ```json
            {
              "source_id": "influxdb_mcp_1",
              "status": "success",
              "data": {"timestamps": [...], "values": [...]},
              "request_id": "req-abc-1"
            }
            ```
            ```json
            {
              "source_id": "faiss_mcp_2",
              "status": "success",
              "data": [{"news_id": 789, "title": "...", "similarity": 0.85}, ...],
              "request_id": "req-abc-2"
            }
            ```
    5.  **μ»¨ν…μ¤νΈ ν†µν•© λ° μƒμ„±:** μ»¨νΈλ΅¤λ¬λ” MCPλ¥Ό ν†µν•΄ μμ‹ λ λ‘ μΆ…λ¥μ λ°μ΄ν„°(μμµλ¥  μ‹κ³„μ—΄, λ‰΄μ¤ κΈ°μ‚¬ λ©λ΅)λ¥Ό ν™•μΈν•κ³ , μ΄λ¥Ό ν•λ‚μ ν†µν•©λ μ»¨ν…μ¤νΈλ΅ κµ¬μ„±ν•μ—¬ LLMμ— μ „λ‹¬ν•©λ‹λ‹¤. LLMμ€ μ΄λ¥Ό λ°”νƒ•μΌλ΅ μΆ…ν•©μ μΈ λ‹µλ³€μ„ μƒμ„±ν•©λ‹λ‹¤.

## π”§ μ£Όμ” κΈ°μ  μ»΄ν¬λ„νΈ

### Vector Database MCP ν†µν•©
- **ν†µν•© μΈν„°νμ΄μ¤**: λ¨λ“  λ²΅ν„° λ°μ΄ν„°λ² μ΄μ¤(FAISS, Pinecone, Weaviate, Chroma λ“±)λ¥Ό ν‘μ¤€ MCP ν”„λ΅ν† μ½λ΅ ν†µν•©
- **ν™•μ¥ κ°€λ¥ν• μ•„ν‚¤ν…μ²**: μ½”μ–΄ μ‹μ¤ν… λ³€κ²½ μ—†μ΄ MCP μ„λ²„λ΅ μ—°κ²° κ°€λ¥
- **ν‘μ¤€ μ‘μ—…**: μΌκ΄€λ MCP μΈν„°νμ΄μ¤λ¥Ό ν†µν• κ²€μƒ‰, μ¶”κ°€, μ‚­μ , μ—…λ°μ΄νΈ, κ²€μ¦ μ‘μ—…
- **μ„±λ¥ μµμ ν™”**: κ³ λ°€λ„ λ²΅ν„°λ¥Ό μ„ν• ν¨μ¨μ μΈ μ μ‚¬λ„ κ²€μƒ‰ λ° ν΄λ¬μ¤ν„°λ§
- **μ—”ν„°ν”„λΌμ΄μ¦ λ€μ‘**: λ¶„μ‚° λ²΅ν„° μ €μ¥μ†λ΅ λ€κ·λ¨ λ°μ΄ν„°μ…‹ μ§€μ›

### LangGraph
- μ—μ΄μ „νΈ RAG μ‹μ¤ν…μ λ³µμ΅ν• μ›ν¬ν”λ΅μ°λ¥Ό κ΄€λ¦¬ν•λ” ν”„λ μ„μ›ν¬
- μ¤‘μ•™ μ΅°μ •μ μ—­ν• μ„ ν•λ©° RAG μ‹μ¤ν…μ μ μ–΄ νλ¦„ κ²°μ •
- ν”Όλ“λ°± λ£¨ν”„μ™€ μ—μ΄μ „νΈ λ™μ‘ μ§€μ›
- κ²€μƒ‰ μ»΄ν¬λ„νΈ, λ©”λ¨λ¦¬ μ‹μ¤ν…, μ–Έμ–΄ μƒμ„± λ¨λ“ κ°„μ μ—°κ²° μ—­ν• 

## π“‹ κ°λ° λ΅λ“λ§µ

### λ‹¤μ λ‹¨κ³„ (Tier 2-5)

#### Tier 2 (ν•µμ‹¬ μ»΄ν¬λ„νΈ)
- **Agent D**: MCP μ–΄λ‘ν„° μ‹μ¤ν… μ™„μ„±
- **Agent E**: λ“±λ΅ μ €μ¥μ† μ‹μ¤ν… κµ¬ν„
- **Agent F**: μΆ…ν•©μ μΈ ν…μ¤νΈ ν”„λ μ„μ›ν¬

#### Tier 3 (ν†µν•© μ‹μ¤ν…)
- **Agent G**: LangGraph κΈ°λ° μ¤‘μ•™ μ»¨νΈλ΅¤λ¬

#### Tier 4 (μΈν„°νμ΄μ¤)
- **Agent H**: FastAPI λ°±μ—”λ“ κµ¬ν„
- **Agent I**: Streamlit μ›Ή μΈν„°νμ΄μ¤

#### Tier 5 (μ™„μ„±)
- **Agent J**: μμ  λ° λ°λ¨ κµ¬ν„
- **Agent K**: λ°°ν¬ λ° μ΄μ μ‹μ¤ν…

### π¤ κΈ°μ—¬ λ°©λ²•

1. μ €μ¥μ† ν¬ν¬
2. κΈ°λ¥ λΈλμΉ μƒμ„± (`git checkout -b feature/amazing-feature`)
3. λ³€κ²½ μ‚¬ν•­ μ»¤λ°‹ (`git commit -m 'Add amazing feature'`)
4. λΈλμΉ ν‘Έμ‹ (`git push origin feature/amazing-feature`)
5. Pull Request μ¤ν”

### π“ λΌμ΄μ„Όμ¤

μ΄ ν”„λ΅μ νΈλ” MIT λΌμ΄μ„Όμ¤ ν•μ— λ°°ν¬λ©λ‹λ‹¤.

### π”— κ΄€λ ¨ λ§ν¬

- [LangGraph λ¬Έμ„](https://python.langchain.com/docs/langgraph/)
- [MCP ν‘μ¤€](https://modelcontextprotocol.io/)
- [ν”„λ΅μ νΈ λ¬Έμ„](/docs/index.md)
- [κ°λ° κ°€μ΄λ“](/TODOs.md)
